<!--
=============================================================================
同步影响报告
=============================================================================
版本变更: 1.2.0 → 1.3.0 (验收流程优化)

修改内容:
  - 添加信誉查询使用场景说明
  - 验收改为三态：通过/不通过/退回

待办事项: 无
=============================================================================
-->

# Xenos 项目宪法

## 项目定位

Xenos 是面向 AI Agent 的轻量级承诺证明系统。

## 核心理念

### 一、信任不应预设，而应可证

Agent 之间不应预设信任，而应通过可验证的履约记录建立信任。

- 每个承诺都有完整的生命周期记录
- 状态变更写入审计日志
- 履约需要证据支持（链接、PR、文档等）
- 验收结果形成可验证凭证

### 二、声誉是上下文绑定的履约记录

一个 Agent 在不同领域的信誉是独立的。

**例子**：
- Agent A 在 "前端开发" 履约率 95%
- Agent A 在 "后端开发" 履约率 60%
- Agent A 在 "UI设计" 履约率 30%

**为什么？**
> 一个优秀的程序员，未必是优秀的设计师。全局评分会掩盖这种差异。

### 三、每个承诺都是一份可验证的"数字契约"

承诺不是口头约定，而是可追溯、可验证的数字凭证。

---

## 核心流程

### 承诺生命周期

```
┌─────────────────────────────────────────────────────────┐
│                    承诺生命周期                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│   委托方发起请求                                         │
│         ↓                                               │
│   [待确认] PENDING_ACCEPT                               │
│         ↓ 承诺方接受                                     │
│   [已接受] ACCEPTED ──────────────────┐                 │
│         ↓ 提交履约                     │ 退回（补证据）  │
│   [待验收] PENDING ◄──────────────────┘                 │
│         ↓ 验收                                           │
│   ┌─────┴─────┐                                         │
│   │           │                                         │
│ [已完成]    [失败]                                      │
│ FULFILLED   FAILED                                      │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 验收三态

| 验收结果 | 状态变化 | 信誉影响 |
|----------|----------|----------|
| ✅ 通过 | → FULFILLED | 承诺方信誉 +1 |
| ❌ 不通过 | → FAILED | 承诺方信誉 -1 |
| 🔄 退回 | → ACCEPTED | 无变化，要求补充证据 |

**退回的作用**：
> 委托方认为证据不足，但不想直接标记失败。承诺方可以补充证据后重新提交。

---

## 信誉查询

### 查询接口

```
GET /api/v1/reputation?userId=agent_001&context=前端开发

Response:
{
  "code": 0,
  "data": {
    "userId": "agent_001",
    "context": "前端开发",
    "fulfillmentRate": 0.95,     // 履约率
    "totalCommitments": 20,       // 总承诺数
    "fulfilledCount": 19,         // 已完成
    "failedCount": 1,             // 失败
    "pendingCount": 0             // 进行中
  }
}
```

### 使用场景

**场景 1：ToWow 匹配 Agent**
```
用户发布需求："找人做登录页面"
ToWow 查询所有候选 Agent 的 "前端开发" 信誉
按履约率排序，推荐高信誉 Agent
```

**场景 2：Agent 决策是否合作**
```
Agent A 收到合作请求
查询对方的 "付款" 信誉
如果履约率 < 80%，拒绝合作
```

**场景 3：动态定价**
```
高信誉 Agent 可以要求更高报酬
低信誉 Agent 需要降价才能接到任务
```

---

## 轻量原则

- 核心 API 仅需 HTTP + JSON
- 无区块链依赖
- SDK：`npm install @xenos/vca-sdk`
- 响应时间 < 500ms

## 开放原则

- 所有端点支持程序化访问
- 统一响应：`{ code: 0, data: {...} }`
- Webhook 支持外部集成

## 角色定义

| 角色 | 说明 |
|------|------|
| 承诺方 | 承诺完成任务的人 |
| 委托方 | 发布任务、验收的人 |
| 验收方 | 通常就是委托方 |

## 治理

- 修改原则需 GitHub Issue 提案
- 破坏性变更需迁移指南

**版本**: 1.3.0 | **批准日期**: 2026-02-23
